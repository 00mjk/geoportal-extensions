{{#extend "ol-sample-bundle-layout"}}

{{#content "head"}}
        <title>Sample openlayers Layers Mapbox</title>
{{/content}}

{{#content "style"}}
        <style>
            body {
                margin: unset;
            }
            #layers {

            }
        </style>
{{/content}}

{{#content "body"}}
            <h2>Ajout du widget d'Ã©dition des layers MapBox</h2>
            <button id="displayFalse">Hidden</button>
            <button id="displayTrue">Show</button>
            <div id="layers">
            </div>
{{/content}}

{{#content "js"}}
            <script type="text/javascript">

            // layers vide et target par defaut
            var layers0 = new ol.editor.Layer();
            layers0.add();

            // layers vide
            var layers1 = new ol.editor.Layer({
                target: document.getElementById("layers"),
                position : 1
            });
            layers1.add();

            // layers
            var layers2 = new ol.editor.Layer({
                target: document.getElementById("layers"),
                tools : {
                    visibility : true,
                    remove : false,
                    clone : false
                },
                position : 2,
                obj: {
                    id : "Titre2",
                    "source-layer" : "Description2",
                    type: "symbol"
                },
            });
            layers2.add();
            console.log("visibility 2 : ", layers2.visibility());

            var layers3 = new ol.editor.Layer({
                target: document.getElementById("layers"),
                tools : {
                    visibility : true,
                    type : false,
                    remove : true,
                    clone : true
                },
                position : 3,
                obj: {
                    id : "Titre3",
                    "source-layer" : "Description3",
                    type: "line"
                },
            });
            layers3.add();
            layers3.visibility(false);
            console.log("visibility 3 : ", layers3.visibility());
            layers3.toggle();

            var layers4 = new ol.editor.Layer({
                target: document.getElementById("layers"),
                position : 4,
                obj: {
                    id : "Titre4",
                    "source-layer" : "Description4",
                    type: "fill"
                },
            });
            layers4.add();
            var filter = new ol.editor.Filter({
                target: document.getElementById("layers"),
                obj: {
                    "filter": [
                        "all",
                        [
                            ">",
                            "PERSONS",
                            2000000
                        ],
                        [
                            "<=",
                            "PERSONS",
                            4000000
                        ]
                    ]
                }
            });
            filter.add();
            layers4.addFilter(filter);
            var style = new ol.editor.Style({
                target: document.getElementById("layers"),
                obj: {
                    "paint": {
                      "fill-color": "#0F78B4",
                      "fill-opacity": 0.7
                    }
                }
            });
            style.add();
            layers4.addStyle(style);
            var legend = new ol.editor.Legend({
                target: document.getElementById("layers"),
                obj : {
                    "title" : "Legende...",
                    "paint" : {
                      "fill-color": "#0F78B4",
                      "fill-opacity": 0.7
                    }
                }
            });
            legend.add();
            legend.display(false);
            layers4.addLegend(legend);
            layers4.slotLegend(); // integration de la legende dans le container du layers !

            var layers5 = new ol.editor.Layer({
                target: document.getElementById("layers"),
                position : 5,
                obj: {
                    id : "Titre5",
                    "source-layer" : "Description5",
                    type: "circle"
                },
            });
            layers5.add();
            layers5.active(false);
            layers5.visible();

            document.getElementById("displayTrue").addEventListener("click", function () {
                layers0.display(true);
                layers1.display(true);
                layers2.display(true);
                layers3.display(true);
                layers4.display(true);
                layers5.display(true);
            });

            document.getElementById("displayFalse").addEventListener("click", function () {
                layers0.display(false);
                layers1.display(false);
                layers2.display(false);
                layers3.display(false);
                layers4.display(false);
                layers5.display(false);
            });

            </script>
{{/content}}
{{/extend}}
