<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <!-- Library Leaflet -->
  <link rel="stylesheet" href="../../../lib/leaflet/leaflet.css" />
  <script src="../../../lib/leaflet/leaflet.js"></script>

  <!-- Plugin leaflet IGN -->
  <link rel="stylesheet" href="../../../dist/leaflet/GpPluginLeaflet.css" />
  <script src="../../../dist/leaflet/GpPluginLeaflet-src.js" data-key="jhyvi0fgmnuxvfv0zjzorvdn"></script>

</head>
<body>
    <!-- code -->
    <script>

      var layerSwitcher, ign, osm;
          window.onload = function () {


              ign = L.geoportalLayer.WMTS({
                layer : "ORTHOIMAGERY.ORTHOPHOTOS",
              });

              osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                  attribution: 'OpenStreetMap',
                  opacity : 1
              });

              var map  = L.map('map', {
                zoom : 8,
                center : L.latLng(48, 2),
                // layers : [osm, ign],
                // minZoom : 3,
                // maxZoom : 18,
                // cf. http://leafletjs.com/reference.html#map-usage
                // bounceAtZoomLimits
                // fadeAnimation : true,
                // zoomAnimation,
                // zoomAnimationThreshold,
                // markerZoomAnimation,
              });

              // map.addLayer(wmts);
              // map.addLayer(wms);

              var layers = [
                {
                  layer : osm,
                  display : true,
                  config : {
                     title : "Couche OSM",
                     description : "OpenStreetMap",
                     visibility : true
                  }
                }
              ];

              layerSwitcher = L.geoportalControl.LayerSwitcher({
                layers : layers,
                collapsed : true // FIXME BUG avec collapsed:false lorsque l'on ajoute
                // une couche (cf. Leaflet et _expandIfNotCollapsed())
              });
              map.addControl(layerSwitcher);

              document.getElementById("addLayer").onclick = function (e) {

                layerSwitcher.addLayer(ign, {
                  display : true,
                  config : {
                    title : "Couche IGN",
                    description : "Images IGN",
                    visibility : true
                  }
                });
                layerSwitcher.setOpacity(ign, 0.5);
              }

              document.getElementById("removeLayer").onclick = function (e) {
                layerSwitcher.removeLayer(osm);
              }
        }

    </script>

    <!-- map -->
    <div id="map" style="height: 400px;"></div>
    <button type="button" id="addLayer">Ajouter une couche</button>
    <button type="button" id="removeLayer">Supprimer une couche</button>

</body>
</html>
